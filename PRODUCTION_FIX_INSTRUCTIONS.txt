PRODUCTION SERVER FIX INSTRUCTIONS
==================================

ISSUE: Visitor Activity showing CORS error and 500 Internal Server Error

ROOT CAUSE: Missing authentication parameter in activity-view endpoint

FILES TO UPDATE ON PRODUCTION SERVER:

1. routers/visitors.py
   Line 112-116: Update get_visitor_activity_view function

CHANGE FROM:
@router.get("/{project_id}/activity-view")
def get_visitor_activity_view(project_id: int, limit: int = 1000, db: Session = Depends(get_db)):
    """Dedicated endpoint for Visitor Activity Page"""
    # Simply calls the existing logic for now, but provides a unique route for the page
    return get_visitor_activity(project_id, limit, db)

CHANGE TO:
@router.get("/{project_id}/activity-view")
def get_visitor_activity_view(
    project_id: int, 
    limit: int = 1000, 
    db: Session = Depends(get_db),
    current_user: Optional[models.User] = Depends(get_current_user_optional)
):
    """Dedicated endpoint for Visitor Activity Page"""
    # Simply calls the existing logic for now, but provides a unique route for the page
    return get_visitor_activity(project_id, limit, db)

2. Restart the production server after changes

EXPECTED RESULT:
- 500 error will be fixed
- CORS headers will be properly sent
- Visitor activity data will show in frontend

NOTE: CORS is already configured correctly in main.py
The issue is the 500 error preventing CORS headers from being sent
